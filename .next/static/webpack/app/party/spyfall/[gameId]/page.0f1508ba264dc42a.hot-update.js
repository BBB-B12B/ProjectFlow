"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/party/spyfall/[gameId]/page",{

/***/ "(app-pages-browser)/./src/app/party/spyfall/actions.ts":
/*!******************************************!*\
  !*** ./src/app/party/spyfall/actions.ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   castEndGameVote: () => (/* binding */ castEndGameVote),\n/* harmony export */   castVote: () => (/* binding */ castVote),\n/* harmony export */   createSpyfallGame: () => (/* binding */ createSpyfallGame),\n/* harmony export */   endSpyfallGame: () => (/* binding */ endSpyfallGame),\n/* harmony export */   requestEndGameVote: () => (/* binding */ requestEndGameVote),\n/* harmony export */   requestVote: () => (/* binding */ requestVote),\n/* harmony export */   spyGuessLocation: () => (/* binding */ spyGuessLocation),\n/* harmony export */   tallyVotes: () => (/* binding */ tallyVotes)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-client-wrapper */ \"(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js\");\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_action_entry_do_not_use__ {\"4006e5b1c476d9aaceb0c3163116de60e52011b5bd\":\"tallyVotes\",\"4014102f32762d790abd77fa4973827abdb6d23fb2\":\"createSpyfallGame\",\"4057cef7a5cfbc35089ccf1949e05521045bf1860c\":\"endSpyfallGame\",\"601d08c6008c92e7335d4095d6f27d5e0d68b7641c\":\"requestEndGameVote\",\"6083e19f313b0939a8f5135a60906de075c2adda36\":\"castEndGameVote\",\"609aa8ac3bf05db49c0de44816e1e8c869d84c4626\":\"requestVote\",\"70c6a24a278b74cfe333de98766182133c12b87d0e\":\"castVote\",\"70eb3bd8f18de651e7fcacf204940f168dd2731bec\":\"spyGuessLocation\"} */ \nvar createSpyfallGame = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4014102f32762d790abd77fa4973827abdb6d23fb2\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"createSpyfallGame\");\nvar requestVote = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"609aa8ac3bf05db49c0de44816e1e8c869d84c4626\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"requestVote\");\nvar castVote = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"70c6a24a278b74cfe333de98766182133c12b87d0e\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"castVote\");\nvar tallyVotes = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4006e5b1c476d9aaceb0c3163116de60e52011b5bd\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"tallyVotes\");\nvar spyGuessLocation = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"70eb3bd8f18de651e7fcacf204940f168dd2731bec\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"spyGuessLocation\");\nvar endSpyfallGame = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4057cef7a5cfbc35089ccf1949e05521045bf1860c\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"endSpyfallGame\");\nvar requestEndGameVote = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"601d08c6008c92e7335d4095d6f27d5e0d68b7641c\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"requestEndGameVote\");\nvar castEndGameVote = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"6083e19f313b0939a8f5135a60906de075c2adda36\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"castEndGameVote\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvcGFydHkvc3B5ZmFsbC9hY3Rpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0lBMEJzQkEsa0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWdFQUMsNEJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTRDQUMseUJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQVVBQywyQkFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBMkVBQyxpQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBd0NBQywrQkFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBcUJBQyxtQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBa0NBQyxnQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBIiwic291cmNlcyI6WyIvaG9tZS91c2VyL3N0dWRpby9zcmMvYXBwL3BhcnR5L3NweWZhbGwvYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcblxuaW1wb3J0IHsgZGIgfSBmcm9tIFwiQC9saWIvZmlyZWJhc2VcIjtcbmltcG9ydCB7IGNvbGxlY3Rpb24sIGdldERvY3MsIGRvYywgc2V0RG9jLCBUaW1lc3RhbXAsIHJ1blRyYW5zYWN0aW9uLCBhcnJheVVuaW9uLCB1cGRhdGVEb2MgfSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbmludGVyZmFjZSBQbGF5ZXIge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBMb2NhdGlvbiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lX2VuOiBzdHJpbmc7XG4gICAgbmFtZV90aDogc3RyaW5nO1xuICAgIHJvbGVzX2VuOiBzdHJpbmdbXTtcbiAgICByb2xlc190aDogc3RyaW5nW107XG59XG5cbmZ1bmN0aW9uIHNodWZmbGVBcnJheTxUPihhcnJheTogVFtdKTogVFtdIHtcbiAgICBmb3IgKGxldCBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgICAgICBjb25zdCBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgICAgIFthcnJheVtpXSwgYXJyYXlbal1dID0gW2FycmF5W2pdLCBhcnJheVtpXV07XG4gICAgfVxuICAgIHJldHVybiBhcnJheTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNweWZhbGxHYW1lKHBsYXllcnM6IFBsYXllcltdKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHBsYXllcnMubGVuZ3RoIDwgMykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiTm90IGVub3VnaCBwbGF5ZXJzLiBSZXF1aXJlcyBhdCBsZWFzdCAzIHBsYXllcnMuXCIgfTtcblxuICAgICAgICBjb25zdCBsb2NhdGlvbnNDb2wgPSBjb2xsZWN0aW9uKGRiLCAnc3B5ZmFsbF9sb2NhdGlvbnMnKTtcbiAgICAgICAgY29uc3QgbG9jYXRpb25zU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvY2F0aW9uc0NvbCk7XG4gICAgICAgIGlmIChsb2NhdGlvbnNTbmFwc2hvdC5lbXB0eSkgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiTm8gbG9jYXRpb25zIGZvdW5kIGluIHRoZSBkYXRhYmFzZS5cIiB9O1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWxsTG9jYXRpb25zID0gbG9jYXRpb25zU25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSBhcyBMb2NhdGlvbikpO1xuICAgICAgICBjb25zdCBzZWxlY3RlZExvY2F0aW9uID0gYWxsTG9jYXRpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFsbExvY2F0aW9ucy5sZW5ndGgpXTtcbiAgICAgICAgY29uc3Qgc2h1ZmZsZWRQbGF5ZXJzID0gc2h1ZmZsZUFycmF5KFsuLi5wbGF5ZXJzXSk7XG4gICAgICAgIGNvbnN0IHNweUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2h1ZmZsZWRQbGF5ZXJzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IHNweSA9IHNodWZmbGVkUGxheWVyc1tzcHlJbmRleF07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhdmFpbGFibGVSb2xlcyA9IHNodWZmbGVBcnJheShbLi4uc2VsZWN0ZWRMb2NhdGlvbi5yb2xlc190aF0pO1xuICAgICAgICBjb25zdCBwbGF5ZXJBc3NpZ25tZW50cyA9IHNodWZmbGVkUGxheWVycy5tYXAoKHBsYXllciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gc3B5SW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXJJZDogcGxheWVyLmlkLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwbGF5ZXIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogXCJTcHlcIixcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IFwiPz8/XCIsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9sZSA9IGF2YWlsYWJsZVJvbGVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllcklkOiBwbGF5ZXIuaWQsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHBsYXllci5uYW1lLFxuICAgICAgICAgICAgICAgICAgICByb2xlOiByb2xlIHx8IFwiQ2l2aWxpYW5cIiwgXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBzZWxlY3RlZExvY2F0aW9uLm5hbWVfdGgsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBnYW1lSWQgPSBgc3B5ZmFsbF8ke2NyeXB0by5yYW5kb21VVUlEKCl9YDtcbiAgICAgICAgY29uc3QgZ2FtZVJlZiA9IGRvYyhkYiwgJ3NweWZhbGxfZ2FtZXMnLCBnYW1lSWQpO1xuXG4gICAgICAgIGF3YWl0IHNldERvYyhnYW1lUmVmLCB7XG4gICAgICAgICAgICBjcmVhdGVkQXQ6IFRpbWVzdGFtcC5ub3coKSxcbiAgICAgICAgICAgIHBsYXllcnM6IHBsYXllckFzc2lnbm1lbnRzLFxuICAgICAgICAgICAgbG9jYXRpb246IHNlbGVjdGVkTG9jYXRpb24ubmFtZV90aCxcbiAgICAgICAgICAgIGFsbExvY2F0aW9uczogYWxsTG9jYXRpb25zLm1hcChsID0+IGwubmFtZV90aCksXG4gICAgICAgICAgICBzcHlJZDogc3B5LmlkLFxuICAgICAgICAgICAgc3RhdHVzOiAnaW4tcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgdGltZXJFbmRzQXQ6IFRpbWVzdGFtcC5mcm9tTWlsbGlzKERhdGUubm93KCkgKyA1ICogNjAgKiAxMDAwKSxcbiAgICAgICAgICAgIHZvdGU6IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZXJzOiBbXSxcbiAgICAgICAgICAgICAgICB2b3Rlczoge30sXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnbm9uZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW5kR2FtZVZvdGU6IHsgLy8gTmV3IGZpZWxkIGZvciBlbmQgZ2FtZSB2b3RlXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVyczogW10sXG4gICAgICAgICAgICAgICAgdm90ZXM6IFtdLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ25vbmUnLFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBnYW1lSWQgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY3JlYXRpbmcgU3B5ZmFsbCBnYW1lOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkZhaWxlZCB0byBjcmVhdGUgZ2FtZS4gUGxlYXNlIHRyeSBhZ2Fpbi5cIiB9O1xuICAgIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RWb3RlKGdhbWVJZDogc3RyaW5nLCBwbGF5ZXJJZDogc3RyaW5nKSB7XG4gICAgaWYgKCFnYW1lSWQgfHwgIXBsYXllcklkKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJJbnZhbGlkIGdhbWUgb3IgcGxheWVyIElELlwiIH07XG5cbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBydW5UcmFuc2FjdGlvbihkYiwgYXN5bmMgKHRyYW5zYWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBnYW1lUmVmID0gZG9jKGRiLCAnc3B5ZmFsbF9nYW1lcycsIGdhbWVJZCk7XG4gICAgICAgICAgICBjb25zdCBnYW1lRG9jID0gYXdhaXQgdHJhbnNhY3Rpb24uZ2V0KGdhbWVSZWYpO1xuICAgICAgICAgICAgaWYgKCFnYW1lRG9jLmV4aXN0cygpKSB0aHJvdyBuZXcgRXJyb3IoXCJHYW1lIG5vdCBmb3VuZC5cIik7XG5cbiAgICAgICAgICAgIGNvbnN0IGdhbWVEYXRhID0gZ2FtZURvYy5kYXRhKCk7XG4gICAgICAgICAgICBpZiAoZ2FtZURhdGEuc3RhdHVzICE9PSAnaW4tcHJvZ3Jlc3MnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZXF1ZXN0Vm90ZTogR2FtZSBub3QgaW4gaW4tcHJvZ3Jlc3Mgc3RhdGUuIEN1cnJlbnQgc3RhdHVzOlwiLCBnYW1lRGF0YS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gXG5cbiAgICAgICAgICAgIGNvbnN0IHBsYXllcnMgPSBnYW1lRGF0YS5wbGF5ZXJzO1xuICAgICAgICAgICAgY29uc3Qgdm90ZSA9IGdhbWVEYXRhLnZvdGUgfHwgeyByZXF1ZXN0ZXJzOiBbXSB9O1xuICAgICAgICAgICAgaWYgKHZvdGUucmVxdWVzdGVycy5pbmNsdWRlcyhwbGF5ZXJJZCkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlcXVlc3RWb3RlOiBQbGF5ZXIgYWxyZWFkeSByZXF1ZXN0ZWQgdm90ZS5cIiwgcGxheWVySWQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJhbnNhY3Rpb24udXBkYXRlKGdhbWVSZWYsIHsgXCJ2b3RlLnJlcXVlc3RlcnNcIjogYXJyYXlVbmlvbihwbGF5ZXJJZCkgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG5ld1JlcXVlc3RlcnMgPSBbLi4udm90ZS5yZXF1ZXN0ZXJzLCBwbGF5ZXJJZF07XG4gICAgICAgICAgICBjb25zdCByZXF1aXJlZFZvdGVzID0gTWF0aC5jZWlsKHBsYXllcnMubGVuZ3RoICogMC43KTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coYFJlcXVlc3RWb3RlOiBUb3RhbCBwbGF5ZXJzOiAke3BsYXllcnMubGVuZ3RofSwgTmV3IHJlcXVlc3RlcnM6ICR7bmV3UmVxdWVzdGVycy5sZW5ndGh9LCBSZXF1aXJlZCB2b3RlczogJHtyZXF1aXJlZFZvdGVzfWApO1xuXG4gICAgICAgICAgICBpZiAobmV3UmVxdWVzdGVycy5sZW5ndGggPj0gcmVxdWlyZWRWb3Rlcykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVxdWVzdFZvdGU6IFJlcXVpcmVkIHZvdGVzIG1ldCwgY2hhbmdpbmcgc3RhdHVzIHRvIHZvdGluZy5cIik7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24udXBkYXRlKGdhbWVSZWYsIHsgXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ3ZvdGluZycsXG4gICAgICAgICAgICAgICAgICAgIFwidm90ZS5zdGF0dXNcIjogJ2FjdGl2ZScsXG4gICAgICAgICAgICAgICAgICAgIFwidm90ZS50aW1lckVuZHNBdFwiOiBUaW1lc3RhbXAuZnJvbU1pbGxpcyhEYXRlLm5vdygpICsgMjAgKiAxMDAwKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlcXVlc3RWb3RlOiBSZXF1aXJlZCB2b3RlcyBOT1QgbWV0IHlldC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHsgY29uc29sZS5lcnJvcihcIkVycm9yIHJlcXVlc3Rpbmcgdm90ZTpcIiwgZXJyb3IpOyByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJGYWlsZWQgdG8gcmVxdWVzdCB2b3RlLlwiIH07IH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhc3RWb3RlKGdhbWVJZDogc3RyaW5nLCB2b3RlcklkOiBzdHJpbmcsIHRhcmdldElkOiBzdHJpbmcpIHtcbiAgICBpZiAoIWdhbWVJZCB8fCAhdm90ZXJJZCB8fCAhdGFyZ2V0SWQpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkludmFsaWQgSURzIHByb3ZpZGVkLlwiIH07XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBnYW1lUmVmID0gZG9jKGRiLCAnc3B5ZmFsbF9nYW1lcycsIGdhbWVJZCk7XG4gICAgICAgIGF3YWl0IHVwZGF0ZURvYyhnYW1lUmVmLCB7IFtgdm90ZS52b3Rlcy4ke3ZvdGVySWR9YF06IHRhcmdldElkIH0pO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHsgY29uc29sZS5lcnJvcihcIkVycm9yIGNhc3Rpbmcgdm90ZTpcIiwgZXJyb3IpOyByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJGYWlsZWQgdG8gY2FzdCB2b3RlLlwiIH07IH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRhbGx5Vm90ZXMoZ2FtZUlkOiBzdHJpbmcpIHtcbiAgICBpZiAoIWdhbWVJZCkgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiSW52YWxpZCBnYW1lIElELlwiIH07XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgcnVuVHJhbnNhY3Rpb24oZGIsIGFzeW5jICh0cmFuc2FjdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZ2FtZVJlZiA9IGRvYyhkYiwgJ3NweWZhbGxfZ2FtZXMnLCBnYW1lSWQpO1xuICAgICAgICAgICAgY29uc3QgZ2FtZURvYyA9IGF3YWl0IHRyYW5zYWN0aW9uLmdldChnYW1lUmVmKTtcbiAgICAgICAgICAgIGlmICghZ2FtZURvYy5leGlzdHMoKSkgdGhyb3cgbmV3IEVycm9yKFwiR2FtZSBub3QgZm91bmQuXCIpO1xuXG4gICAgICAgICAgICBjb25zdCBnYW1lRGF0YSA9IGdhbWVEb2MuZGF0YSgpO1xuICAgICAgICAgICAgaWYgKGdhbWVEYXRhLnN0YXR1cyAhPT0gJ3ZvdGluZycpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRhbGx5Vm90ZXM6IEdhbWUgbm90IGluIHZvdGluZyBzdGF0ZS4gQ3VycmVudCBzdGF0dXM6XCIsIGdhbWVEYXRhLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBPbmx5IHRhbGx5IHZvdGVzIGlmIGluIHZvdGluZyBzdGF0ZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB2b3RlcyA9IGdhbWVEYXRhLnZvdGUudm90ZXMgfHwge307XG4gICAgICAgICAgICBjb25zdCB2b3RlQ291bnRzOiB7IFt0YXJnZXRJZDogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yIChjb25zdCB2b3RlcklkIGluIHZvdGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SWQgPSB2b3Rlc1t2b3RlcklkXTtcbiAgICAgICAgICAgICAgICB2b3RlQ291bnRzW3RhcmdldElkXSA9ICh2b3RlQ291bnRzW3RhcmdldElkXSB8fCAwKSArIDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBtYXhWb3RlcyA9IDA7XG4gICAgICAgICAgICBsZXQgdm90ZWRQbGF5ZXJJZCA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhcmdldElkIGluIHZvdGVDb3VudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAodm90ZUNvdW50c1t0YXJnZXRJZF0gPiBtYXhWb3Rlcykge1xuICAgICAgICAgICAgICAgICAgICBtYXhWb3RlcyA9IHZvdGVDb3VudHNbdGFyZ2V0SWRdO1xuICAgICAgICAgICAgICAgICAgICB2b3RlZFBsYXllcklkID0gdGFyZ2V0SWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBzcHlJZCA9IGdhbWVEYXRhLnNweUlkO1xuICAgICAgICAgICAgY29uc3Qgd2lubmVyID0gdm90ZWRQbGF5ZXJJZCA9PT0gc3B5SWQgPyAncGxheWVycycgOiAnc3B5JztcbiAgICAgICAgICAgIGNvbnN0IHZvdGVkUGxheWVyID0gZ2FtZURhdGEucGxheWVycy5maW5kKChwOmFueSkgPT4gcC5wbGF5ZXJJZCA9PT0gdm90ZWRQbGF5ZXJJZCk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGFsbHlWb3RlczogVm90ZWQgcGxheWVyIElEOlwiLCB2b3RlZFBsYXllcklkLCBcIlNweSBJRDpcIiwgc3B5SWQsIFwiV2lubmVyOlwiLCB3aW5uZXIpO1xuXG4gICAgICAgICAgICBpZiAod2lubmVyID09PSAncGxheWVycycpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBwbGF5ZXJzIGNvcnJlY3RseSBpZGVudGlmeSB0aGUgc3B5LCB0cmFuc2l0aW9uIHRvIHNweS1ndWVzc2luZyBwaGFzZVxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnVwZGF0ZShnYW1lUmVmLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ3NweS1ndWVzc2luZycsXG4gICAgICAgICAgICAgICAgICAgIFwidm90ZS5zdGF0dXNcIjogJ2ZpbmlzaGVkJyxcbiAgICAgICAgICAgICAgICAgICAgc3B5R3Vlc3Npbmc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNweUlkOiBzcHlJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVkQnlQbGF5ZXJzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25PcHRpb25zOiBnYW1lRGF0YS5hbGxMb2NhdGlvbnMsIC8vIEdpdmUgYWxsIGxvY2F0aW9ucyBmb3Igc3B5IHRvIGd1ZXNzXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogeyAvLyBQcmUtZmlsbCBzb21lIHJlc3VsdCBkYXRhLCB3aW5uZXIgaXMgc3RpbGwgdW5kZWNpZGVkIGF0IHRoaXMgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5lcjogJ3NweScsIC8vIFRlbXBvcmFyaWx5IHNldCBhcyBzcHkgd2lucyB1bnRpbCBzcHkgZ3Vlc3Nlc1xuICAgICAgICAgICAgICAgICAgICAgICAgdm90ZWRQbGF5ZXJOYW1lOiB2b3RlZFBsYXllcj8ubmFtZSB8fCAnVW5rbm93bicsXG4gICAgICAgICAgICAgICAgICAgICAgICBzcHlOYW1lOiBnYW1lRGF0YS5wbGF5ZXJzLmZpbmQoKHA6YW55KSA9PiBwLnBsYXllcklkID09PSBzcHlJZCk/Lm5hbWUgfHwgJ1Vua25vd24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IGdhbWVEYXRhLmxvY2F0aW9uLCAvLyBDb3JyZWN0IGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRhbGx5Vm90ZXM6IFBsYXllcnMgaWRlbnRpZmllZCBzcHksIHRyYW5zaXRpb25pbmcgdG8gc3B5LWd1ZXNzaW5nLlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgcGxheWVycyBpbmNvcnJlY3RseSB2b3RlLCB0aGUgc3B5IHdpbnMgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi51cGRhdGUoZ2FtZVJlZiwge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdmaW5pc2hlZCcsXG4gICAgICAgICAgICAgICAgICAgIFwidm90ZS5zdGF0dXNcIjogJ2ZpbmlzaGVkJyxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5uZXI6ICdzcHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgdm90ZWRQbGF5ZXJOYW1lOiB2b3RlZFBsYXllcj8ubmFtZSB8fCAnTm9ib2R5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNweU5hbWU6IGdhbWVEYXRhLnBsYXllcnMuZmluZCgocDphbnkpID0+IHAucGxheWVySWQgPT09IHNweUlkKT8ubmFtZSB8fCAnVW5rbm93bicsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogZ2FtZURhdGEubG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRhbGx5Vm90ZXM6IFBsYXllcnMgdm90ZWQgaW5jb3JyZWN0bHksIHNweSB3aW5zIGltbWVkaWF0ZWx5LlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICB9IGNhdGNoIChlcnJvcikgeyBjb25zb2xlLmVycm9yKFwiRXJyb3IgdGFsbHlpbmcgdm90ZXM6XCIsIGVycm9yKTsgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHRhbGx5IHZvdGVzLlwiIH07IH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNweUd1ZXNzTG9jYXRpb24oZ2FtZUlkOiBzdHJpbmcsIHNweUlkOiBzdHJpbmcsIGd1ZXNzZWRMb2NhdGlvbjogc3RyaW5nKSB7XG4gICAgaWYgKCFnYW1lSWQgfHwgIXNweUlkIHx8ICFndWVzc2VkTG9jYXRpb24pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkludmFsaWQgaW5wdXQgZm9yIHNweUd1ZXNzTG9jYXRpb24uXCIgfTtcblxuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHJ1blRyYW5zYWN0aW9uKGRiLCBhc3luYyAodHJhbnNhY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdhbWVSZWYgPSBkb2MoZGIsICdzcHlmYWxsX2dhbWVzJywgZ2FtZUlkKTtcbiAgICAgICAgICAgIGNvbnN0IGdhbWVEb2MgPSBhd2FpdCB0cmFuc2FjdGlvbi5nZXQoZ2FtZVJlZik7XG4gICAgICAgICAgICBpZiAoIWdhbWVEb2MuZXhpc3RzKCkpIHRocm93IG5ldyBFcnJvcihcIkdhbWUgbm90IGZvdW5kLlwiKTtcblxuICAgICAgICAgICAgY29uc3QgZ2FtZURhdGEgPSBnYW1lRG9jLmRhdGEoKTtcbiAgICAgICAgICAgIGlmIChnYW1lRGF0YS5zdGF0dXMgIT09ICdzcHktZ3Vlc3NpbmcnIHx8IGdhbWVEYXRhLnNweUd1ZXNzaW5nPy5zcHlJZCAhPT0gc3B5SWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNweUd1ZXNzTG9jYXRpb246IE5vdCBpbiBzcHkgZ3Vlc3NpbmcgcGhhc2Ugb3Igbm90IHRoZSBkZXNpZ25hdGVkIHNweS4gQ3VycmVudCBzdGF0dXM6XCIsIGdhbWVEYXRhLnN0YXR1cywgXCJTcHkgSUQ6XCIsIHNweUlkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJOb3QgaW4gc3B5IGd1ZXNzaW5nIHBoYXNlIG9yIG5vdCB0aGUgZGVzaWduYXRlZCBzcHkuXCIgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgY29ycmVjdExvY2F0aW9uID0gZ2FtZURhdGEubG9jYXRpb247XG4gICAgICAgICAgICBjb25zdCBzcHlHdWVzc2VkQ29ycmVjdGx5ID0gZ3Vlc3NlZExvY2F0aW9uID09PSBjb3JyZWN0TG9jYXRpb247XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTcHlHdWVzc0xvY2F0aW9uOiBHdWVzc2VkIGxvY2F0aW9uOiAke2d1ZXNzZWRMb2NhdGlvbn0sIENvcnJlY3QgbG9jYXRpb246ICR7Y29ycmVjdExvY2F0aW9ufSwgR3Vlc3NlZCBjb3JyZWN0bHk6ICR7c3B5R3Vlc3NlZENvcnJlY3RseX1gKTtcblxuICAgICAgICAgICAgdHJhbnNhY3Rpb24udXBkYXRlKGdhbWVSZWYsIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdmaW5pc2hlZCcsXG4gICAgICAgICAgICAgICAgXCJzcHlHdWVzc2luZy5zdGF0dXNcIjogJ2ZpbmlzaGVkJyxcbiAgICAgICAgICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgd2lubmVyOiBzcHlHdWVzc2VkQ29ycmVjdGx5ID8gJ3NweScgOiAncGxheWVycycsXG4gICAgICAgICAgICAgICAgICAgIHZvdGVkUGxheWVyTmFtZTogZ2FtZURhdGEucmVzdWx0Py52b3RlZFBsYXllck5hbWUgfHwgJ1Vua25vd24nLFxuICAgICAgICAgICAgICAgICAgICBzcHlOYW1lOiBnYW1lRGF0YS5wbGF5ZXJzLmZpbmQoKHA6YW55KSA9PiBwLnBsYXllcklkID09PSBzcHlJZCk/Lm5hbWUgfHwgJ1Vua25vd24nLFxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogY29ycmVjdExvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICBzcHlHdWVzc2VkTG9jYXRpb246IGd1ZXNzZWRMb2NhdGlvbiwgLy8gU3RvcmUgdGhlIHNweSdzIGd1ZXNzXG4gICAgICAgICAgICAgICAgICAgIHNweUd1ZXNzZWRDb3JyZWN0bHk6IHNweUd1ZXNzZWRDb3JyZWN0bHksXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIHNweUd1ZXNzTG9jYXRpb246XCIsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJlY29yZCBzcHkncyBndWVzcy5cIiB9O1xuICAgIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuZFNweWZhbGxHYW1lKGdhbWVJZDogc3RyaW5nKSB7XG4gICAgY29uc3QgTE9CQllfSUQgPSBcImdsb2JhbF9sb2JieVwiO1xuICAgIGNvbnN0IGdhbWVSZWYgPSBkb2MoZGIsICdzcHlmYWxsX2dhbWVzJywgZ2FtZUlkKTtcbiAgICBjb25zdCBsb2JieVJlZiA9IGRvYyhkYiwgXCJzcHlmYWxsX2xvYmJpZXNcIiwgTE9CQllfSUQpO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFbmRTcHlmYWxsR2FtZTogQXR0ZW1wdGluZyB0byBlbmQgZ2FtZSB3aXRoIElEOlwiLCBnYW1lSWQpO1xuICAgICAgICAvLyBTZXQgZ2FtZSBzdGF0dXMgdG8gZmluaXNoZWRcbiAgICAgICAgYXdhaXQgdXBkYXRlRG9jKGdhbWVSZWYsIHsgc3RhdHVzOiAnZmluaXNoZWQnIH0pO1xuXG4gICAgICAgIC8vIFJlc2V0IGxvYmJ5IHN0YXR1cyBhbmQgY2xlYXIgcGxheWVycy9vYnNlcnZlcnNcbiAgICAgICAgYXdhaXQgc2V0RG9jKGxvYmJ5UmVmLCB7IHBsYXllcnM6IFtdLCBvYnNlcnZlcnM6IFtdLCBzdGF0dXM6ICd3YWl0aW5nJyB9KTtcbiAgICAgICAgY29uc29sZS5sb2coXCJFbmRTcHlmYWxsR2FtZTogTG9iYnkgcmVzZXQgdG8gd2FpdGluZy5cIik7XG5cbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbmRpbmcgU3B5ZmFsbCBnYW1lOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkZhaWxlZCB0byBlbmQgZ2FtZS4gUGxlYXNlIHRyeSBhZ2Fpbi5cIiB9O1xuICAgIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RFbmRHYW1lVm90ZShnYW1lSWQ6IHN0cmluZywgcGxheWVySWQ6IHN0cmluZykge1xuICAgIGlmICghZ2FtZUlkIHx8ICFwbGF5ZXJJZCkgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiSW52YWxpZCBnYW1lIG9yIHBsYXllciBJRC5cIiB9O1xuXG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgcnVuVHJhbnNhY3Rpb24oZGIsIGFzeW5jICh0cmFuc2FjdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZ2FtZVJlZiA9IGRvYyhkYiwgJ3NweWZhbGxfZ2FtZXMnLCBnYW1lSWQpO1xuICAgICAgICAgICAgY29uc3QgZ2FtZURvYyA9IGF3YWl0IHRyYW5zYWN0aW9uLmdldChnYW1lUmVmKTtcbiAgICAgICAgICAgIGlmICghZ2FtZURvYy5leGlzdHMoKSkgdGhyb3cgbmV3IEVycm9yKFwiR2FtZSBub3QgZm91bmQuXCIpO1xuXG4gICAgICAgICAgICBjb25zdCBnYW1lRGF0YSA9IGdhbWVEb2MuZGF0YSgpO1xuICAgICAgICAgICAgaWYgKGdhbWVEYXRhLnN0YXR1cyAhPT0gJ2luLXByb2dyZXNzJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVxdWVzdEVuZEdhbWVWb3RlOiBHYW1lIG5vdCBpbiBpbi1wcm9ncmVzcyBzdGF0ZS4gQ3VycmVudCBzdGF0dXM6XCIsIGdhbWVEYXRhLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBcblxuICAgICAgICAgICAgY29uc3QgZW5kR2FtZVZvdGUgPSBnYW1lRGF0YS5lbmRHYW1lVm90ZSB8fCB7IHJlcXVlc3RlcnM6IFtdLCB2b3RlczogW10sIHN0YXR1czogJ25vbmUnIH07XG4gICAgICAgICAgICBpZiAoZW5kR2FtZVZvdGUucmVxdWVzdGVycy5pbmNsdWRlcyhwbGF5ZXJJZCkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlcXVlc3RFbmRHYW1lVm90ZTogUGxheWVyIGFscmVhZHkgcmVxdWVzdGVkIGVuZCBnYW1lIHZvdGUuXCIsIHBsYXllcklkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJZb3UgaGF2ZSBhbHJlYWR5IHJlcXVlc3RlZCB0byBlbmQgdGhlIGdhbWUuXCIgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJhbnNhY3Rpb24udXBkYXRlKGdhbWVSZWYsIHsgXG4gICAgICAgICAgICAgICAgXCJlbmRHYW1lVm90ZS5yZXF1ZXN0ZXJzXCI6IGFycmF5VW5pb24ocGxheWVySWQpLFxuICAgICAgICAgICAgICAgIFwiZW5kR2FtZVZvdGUuc3RhdHVzXCI6ICdhY3RpdmUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlcXVlc3RFbmRHYW1lVm90ZTogUGxheWVyIHJlcXVlc3RlZCBlbmQgZ2FtZSB2b3RlLlwiLCBwbGF5ZXJJZCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHJlcXVlc3RpbmcgZW5kIGdhbWUgdm90ZTpcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJGYWlsZWQgdG8gcmVxdWVzdCBlbmQgZ2FtZSB2b3RlLlwiIH07XG4gICAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FzdEVuZEdhbWVWb3RlKGdhbWVJZDogc3RyaW5nLCB2b3RlcklkOiBzdHJpbmcpIHtcbiAgICBpZiAoIWdhbWVJZCB8fCAhdm90ZXJJZCkgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiSW52YWxpZCBnYW1lIG9yIHZvdGVyIElELlwiIH07XG5cbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBydW5UcmFuc2FjdGlvbihkYiwgYXN5bmMgKHRyYW5zYWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBnYW1lUmVmID0gZG9jKGRiLCAnc3B5ZmFsbF9nYW1lcycsIGdhbWVJZCk7XG4gICAgICAgICAgICBjb25zdCBnYW1lRG9jID0gYXdhaXQgdHJhbnNhY3Rpb24uZ2V0KGdhbWVSZWYpO1xuICAgICAgICAgICAgaWYgKCFnYW1lRG9jLmV4aXN0cygpKSB0aHJvdyBuZXcgRXJyb3IoXCJHYW1lIG5vdCBmb3VuZC5cIik7XG5cbiAgICAgICAgICAgIGNvbnN0IGdhbWVEYXRhID0gZ2FtZURvYy5kYXRhKCk7XG4gICAgICAgICAgICBpZiAoZ2FtZURhdGEuc3RhdHVzICE9PSAnaW4tcHJvZ3Jlc3MnIHx8IGdhbWVEYXRhLmVuZEdhbWVWb3RlPy5zdGF0dXMgIT09ICdhY3RpdmUnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYXN0RW5kR2FtZVZvdGU6IEdhbWUgbm90IGluIGNvcnJlY3Qgc3RhdGUgZm9yIGVuZCBnYW1lIHZvdGUuIFN0YXR1czpcIiwgZ2FtZURhdGEuc3RhdHVzLCBcIkVuZEdhbWVWb3RlIHN0YXR1czpcIiwgZ2FtZURhdGEuZW5kR2FtZVZvdGU/LnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBDYW4gb25seSB2b3RlIGlmIGdhbWUgaXMgaW4gcHJvZ3Jlc3MgYW5kIGVuZCBnYW1lIHZvdGUgaXMgYWN0aXZlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEZpbHRlciBvdXQgdGhlIHNweSBmcm9tIHRoZSBjb3VudCBvZiBwbGF5ZXJzIHdobyBjYW4gdm90ZSBmb3IgZW5kaW5nIHRoZSBnYW1lLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBiZWNhdXNlIHRoZSBzcHkncyBnb2FsIGlzIGRpZmZlcmVudC5cbiAgICAgICAgICAgIGNvbnN0IHBsYXllcnNFbGlnaWJsZUZvckVuZFZvdGUgPSBnYW1lRGF0YS5wbGF5ZXJzLmZpbHRlcigocDphbnkpID0+IHAucGxheWVySWQgIT09IGdhbWVEYXRhLnNweUlkKTsgXG4gICAgICAgICAgICBjb25zdCBlbmRHYW1lVm90ZSA9IGdhbWVEYXRhLmVuZEdhbWVWb3RlIHx8IHsgcmVxdWVzdGVyczogW10sIHZvdGVzOiBbXSB9O1xuXG4gICAgICAgICAgICBpZiAoZW5kR2FtZVZvdGUudm90ZXMuaW5jbHVkZXModm90ZXJJZCkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhc3RFbmRHYW1lVm90ZTogUGxheWVyIGFscmVhZHkgdm90ZWQgdG8gZW5kIGdhbWUuXCIsIHZvdGVySWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIllvdSBoYXZlIGFscmVhZHkgdm90ZWQgdG8gZW5kIHRoZSBnYW1lLlwiIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLnVwZGF0ZShnYW1lUmVmLCB7IFwiZW5kR2FtZVZvdGUudm90ZXNcIjogYXJyYXlVbmlvbih2b3RlcklkKSB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgbmV3Vm90ZXMgPSBbLi4uZW5kR2FtZVZvdGUudm90ZXMsIHZvdGVySWRdO1xuICAgICAgICAgICAgY29uc3QgcmVxdWlyZWRWb3RlcyA9IE1hdGguY2VpbChwbGF5ZXJzRWxpZ2libGVGb3JFbmRWb3RlLmxlbmd0aCAqIDAuNyk7IC8vIDcwJSBvZiBlbGlnaWJsZSBwbGF5ZXJzXG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDYXN0RW5kR2FtZVZvdGU6IEVsaWdpYmxlIHBsYXllcnM6ICR7cGxheWVyc0VsaWdpYmxlRm9yRW5kVm90ZS5sZW5ndGh9LCBOZXcgdm90ZXM6ICR7bmV3Vm90ZXMubGVuZ3RofSwgUmVxdWlyZWQgdm90ZXM6ICR7cmVxdWlyZWRWb3Rlc31gKTtcblxuICAgICAgICAgICAgaWYgKG5ld1ZvdGVzLmxlbmd0aCA+PSByZXF1aXJlZFZvdGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYXN0RW5kR2FtZVZvdGU6IDcwJSBvZiBlbGlnaWJsZSBwbGF5ZXJzIHZvdGVkIHRvIGVuZCBnYW1lLiBTZXR0aW5nIGdhbWUgc3RhdHVzIHRvIGZpbmlzaGVkLlwiKTtcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi51cGRhdGUoZ2FtZVJlZiwgeyBzdGF0dXM6ICdmaW5pc2hlZCcsIFwiZW5kR2FtZVZvdGUuc3RhdHVzXCI6ICdmaW5pc2hlZCcgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FzdEVuZEdhbWVWb3RlOiBSZXF1aXJlZCBlbmQgZ2FtZSB2b3RlcyBOT1QgbWV0IHlldC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNhc3RpbmcgZW5kIGdhbWUgdm90ZTpcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJGYWlsZWQgdG8gY2FzdCBlbmQgZ2FtZSB2b3RlLlwiIH07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImNyZWF0ZVNweWZhbGxHYW1lIiwicmVxdWVzdFZvdGUiLCJjYXN0Vm90ZSIsInRhbGx5Vm90ZXMiLCJzcHlHdWVzc0xvY2F0aW9uIiwiZW5kU3B5ZmFsbEdhbWUiLCJyZXF1ZXN0RW5kR2FtZVZvdGUiLCJjYXN0RW5kR2FtZVZvdGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/party/spyfall/actions.ts\n"));

/***/ })

});